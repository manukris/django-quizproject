{% extends "basetemplate.html" %}


{% block title %} Quiz {% endblock %}


{% block content %}

{% load static %}
<section class="section-item examination-page">
    <div class="container">
        <div class="row">
            <div class="section-content">
                <div class="title-wrap">
                    <h2 class="section-title title-line">Examination</h2>
                    <div class="time">
                        <span id="time-left" class="time-left">0:23</span>
                        Time Remaining
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">


                        {% for question in object_list %}
                        <div class="quiz-title">(<span >{{page_obj.number}}</span> / <span >{{ page_obj.paginator.num_pages }}</span>) Questions</div>
                        <div class="quiz-item"><span id="quiz-number"> {{ page_obj.number }} </span> <span>{{question.question}}</span></div>



                        <form class="quizform" name="quizform" action="#" >
                            <div class="radio">
                                <label>
                                    <input type="radio" name="inputopt"  required id="1" value="1">

                                   {{question.option1}}
                                </label>
                            </div>
                            <div class="radio">
                                <label>
                                    <input type="radio" name="inputopt" required id="2" value="2">
                                    {{question.option2}}
                                </label>
                            </div>
                            <div class="radio">
                                <label>
                                    <input type="radio" name="inputopt" required id="3" value="3">
                                    {{question.option3}}
                                </label>
                            </div>
                            <div class="radio">
                                <label>
                                    <input type="radio" name="inputopt" required id="4" value="4">
                                    {{question.option4}}
                                </label>
                            </div>
                            {% csrf_token %}

                            <input type="hidden" name="question" value="{{question.pk}}">
                            <input type="submit" class="btn btn-shadow-not" value=" Next ">
                        </form>

                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>


        <div class="row mt-30">
            <div class="section-content why-chose">
                <div class="title-wrap">
                    <h2 class="section-title title-line">Why Chose Us?</h2>
                </div>
                <div class="row">
                    <div class="why-chose-slider">
                        <div class="col-4">
                            <div class="wraper">
                                <div class="img-wrap">

                                    <img src="{% static 'img/choose-us-1.svg' %}" alt="alt">
                                </div>
                                <p class="text">Expirienced editors and prof-readers in your academic
                                    field.</p>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="wraper">
                                <div class="img-wrap">
                                    <img src=" {% static 'img/choose-us-2.svg' %}" alt="alt">
                                </div>
                                <p class="text">Lowest prices <br> in the market.</p>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="wraper">
                                <div class="img-wrap">
                                    <img src="{% static 'img/choose-us-3.svg' %}" alt="alt">
                                </div>
                                <p class="text">Security, Confidentiality and money back guaranteed.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Modal paperModal-->
<div class="modal fade "id="expiry" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog " role="document"  style="max-width: 30%;" >
        <div class="modal-content">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <div class="modal-header">
                 Time Expired
            </div>

        </div>
    </div>
</div>


<div class="modal fade "id="finish" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
     aria-hidden="true">
    <div class="modal-dialog " role="document"  style="max-width: 30%;" >
        <div class="modal-content">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <div class="modal-header">
                 Quiz Finished
            </div>

        </div>
    </div>
</div>








<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script>



$(document).ready(function () {


    $(".quizform").submit(function(e){

            e.preventDefault()
            var formData = $(this).serialize();
             $.post(
             "{% url 'quizsubmit' %}",
             formData,
             function(data, status){
             //  alert("submit")

                 {% if page_obj.has_next %}


                    window.location.href = "?page={{ page_obj.next_page_number }}";


                {% else %}
                    $("#finish").modal()

                   //  window.location.href = "/";
                  {% endif %}
          });

    });








});
















  var distance = 30;
// Update the count down every 1 second
var x = setInterval(function() {



  // Find the distance between now and the count down date


  // Time calculations for days, hours, minutes and seconds

  var seconds = distance--

  // Output the result in an element with id="demo"
  document.getElementById("time-left").innerHTML =seconds + "s ";

  // If the count down is over, write some text
  if (distance < 0) {
    clearInterval(x);
    document.getElementById("time-left").innerHTML = "EXPIRED";
    $("#expiry").modal()

       {% if page_obj.has_next %}
                   window.location.href = "?page={{ page_obj.next_page_number }}";
        {% else %}
                    $("#finish").modal()
                   //  window.location.href = "/";
        {% endif %}



   // alert("Time Up');
  }
}, 1000);









</script>
<!-- CONTENT END -->
{% endblock %}